<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gym Offline</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #f2f2f7; --card: #fff; --primary: #007aff; --text: #1c1c1e; --gray: #8e8e93; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; -webkit-font-smoothing: antialiased; }
        .screen { padding: 20px 20px 100px 20px; min-height: 100vh; box-sizing: border-box; }
        .hidden { display: none !important; }
        .card { background: var(--card); border-radius: 16px; padding: 18px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        h1 { font-size: 26px; font-weight: 800; margin-bottom: 20px; letter-spacing: -0.5px; }
        h2 { font-size: 20px; margin: 0 0 5px 0; }
        h3 { font-size: 16px; color: var(--primary); margin-top: 0; }
        .tech-text { font-size: 15px; line-height: 1.5; color: #3a3a3c; white-space: pre-line; margin-bottom: 15px; }
        .video-container { width: 100%; border-radius: 12px; overflow: hidden; background: #000; aspect-ratio: 16/9; margin-bottom: 20px; }
        video { width: 100%; height: 100%; object-fit: cover; }
        button { background: var(--primary); color: #fff; border: none; padding: 16px; border-radius: 14px; width: 100%; font-size: 17px; font-weight: 600; cursor: pointer; transition: 0.2s; }
        button:active { transform: scale(0.97); opacity: 0.9; }
        .btn-secondary { background: #e5e5ea; color: var(--primary); margin-top: 10px; }
        .set-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
        .input-box { display: flex; flex-direction: column; }
        .input-box label { font-size: 12px; color: var(--gray); margin-bottom: 4px; padding-left: 5px; }
        input { background: #f2f2f7; border: 1px solid #d1d1d6; padding: 12px; border-radius: 10px; font-size: 17px; text-align: center; }
        .nav { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.85); backdrop-filter: blur(15px); display: flex; justify-content: space-around; padding: 12px 0 35px 0; border-top: 0.5px solid #d1d1d6; }
        .nav-item { border: none; background: none; color: var(--gray); font-size: 11px; display: flex; flex-direction: column; align-items: center; width: 33%; }
        .nav-item.active { color: var(--primary); }
    </style>
</head>
<body>

<div id="app">
    <!-- –ì–õ–ê–í–ù–ê–Ø -->
    <div id="screen-home" class="screen">
        <h1>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h1>
        <div class="card" onclick="startWorkout(0)">
            <h2>–î–ï–ù–¨ 1</h2>
            <p style="color:var(--gray); margin:0;">–ì—Ä—É–¥—å + –°–ø–∏–Ω–∞ + –ö–æ—Ä</p>
        </div>
        <div class="card" onclick="startWorkout(1)">
            <h2>–î–ï–ù–¨ 2</h2>
            <p style="color:var(--gray); margin:0;">–ù–æ–≥–∏ + –ö–æ—Ä</p>
        </div>
        <div class="card" onclick="startWorkout(2)">
            <h2>–î–ï–ù–¨ 3</h2>
            <p style="color:var(--gray); margin:0;">–ü–ª–µ—á–∏ + –†—É–∫–∏ + –ö–æ—Ä</p>
        </div>
    </div>

    <!-- –¢–†–ï–ù–ò–†–û–í–ö–ê -->
    <div id="screen-exercise" class="screen hidden">
        <div id="ex-content"></div>
    </div>

    <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
    <div id="screen-stats" class="screen hidden">
        <h1>–ü—Ä–æ–≥—Ä–µ—Å—Å</h1>
        <div class="card">
            <select id="chart-select" onchange="initChart()" style="width:100%; padding:12px; border-radius:10px; border:1px solid #ddd;"></select>
            <div style="height: 250px; margin-top:20px;">
                <canvas id="mainChart"></canvas>
            </div>
        </div>
        <div id="history-list"></div>
    </div>

    <!-- –ú–ï–ù–Æ -->
    <nav class="nav">
        <div class="nav-item active" onclick="showScreen('home')">üóì –¢—Ä–µ–Ω–∏–Ω–≥</div>
        <div class="nav-item" onclick="showScreen('stats')">üìä –ü—Ä–æ–≥—Ä–µ—Å—Å</div>
    </nav>
</div>

<script>
// –í–ï–°–¨ –í–ê–® –ö–û–ù–¢–ï–ù–¢ –ë–ï–ó –°–û–ö–†–ê–©–ï–ù–ò–ô
const program = [
    {
        day: "–î–µ–Ω—å 1: –ì—Ä—É–¥—å + –°–ø–∏–Ω–∞ + –ö–æ—Ä",
        exercises: [
            { name: "–ñ–∏–º –≤ —Ä—ã—á–∞–∂–Ω–æ–º —Ç—Ä–µ–Ω–∞–∂–µ—Ä–µ Hammer Strength", tech: "‚úÖ –û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ —Å–∏–¥–µ–Ω—å–µ —Ç–∞–∫, —á—Ç–æ–±—ã —Ä—É–∫–æ—è—Ç–∫–∏ –±—ã–ª–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–µ–¥–∏–Ω—ã –≥—Ä—É–¥–∏ (—Å–æ—Å–∫–æ–≤).\n‚úÖ –°–≤–µ–¥–∏—Ç–µ –ª–æ–ø–∞—Ç–∫–∏ –≤–º–µ—Å—Ç–µ –∏ –ø–ª–æ—Ç–Ω–æ –ø—Ä–∏–∂–º–∏—Ç–µ —Å–ø–∏–Ω—É –∫ —Å–ø–∏–Ω–∫–µ.\n‚úÖ –ù–∞ –≤—ã–¥–æ—Ö–µ –º–æ—â–Ω–æ –≤—ã–∂–º–∏—Ç–µ —Ä—É–∫–æ—è—Ç–∏ –≤–ø–µ—Ä–µ–¥.\n‚ùóÔ∏è –í–∞–∂–Ω–æ: –í –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ –Ω–µ –≤—ã–ø—Ä—è–º–ª—è–π—Ç–µ –ª–æ–∫—Ç–∏ –¥–æ –∫–æ–Ω—Ü–∞ (¬´–¥–æ —â–µ–ª—á–∫–∞¬ª), –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∏—Ö —á—É—Ç—å –º—è–≥–∫–∏–º–∏.\n‚úÖ –ù–∞ –≤–¥–æ—Ö–µ –º–µ–¥–ª–µ–Ω–Ω–æ –≤–µ—Ä–Ω–∏—Ç–µ –≤–µ—Å –Ω–∞–∑–∞–¥.", volume: "4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 8‚Äì12 —Ä–∞–∑", video: "v1_1.mp4" },
            { name: "–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ –±–ª–æ–∫–∞ Life Fitness", tech: "‚úÖ –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –Ω–æ–≥–∏ –≤–∞–ª–∏–∫–æ–º. –•–≤–∞—Ç —à–∏—Ä–µ –ø–ª–µ—á.\n‚úÖ –°–ª–µ–≥–∫–∞ –ø—Ä–æ–≥–Ω–∏—Ç–µ –ø–æ—è—Å–Ω–∏—Ü—É, –≥—Ä—É–¥—å —Å–º–æ—Ç—Ä–∏—Ç –≤–≤–µ—Ä—Ö.\n‚úÖ –¢—è–Ω–∏—Ç–µ —Ä—É–∫–æ—è—Ç—å –∫ –∫–ª—é—á–∏—Ü–∞–º. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —Ç—è–Ω–µ—Ç–µ –Ω–µ –∫–∏—Å—Ç—è–º–∏, –∞ –ª–æ–∫—Ç—è–º–∏ –≤–Ω–∏–∑.\n‚úÖ –í –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–µ –ø–∞—É–∑–∞ 1 —Å–µ–∫—É–Ω–¥–∞.\n‚úÖ –ü–ª–∞–≤–Ω–æ –≤–µ—Ä–Ω–∏—Ç–µ —Ä—É–∫–æ—è—Ç—å –≤–≤–µ—Ä—Ö.", volume: "4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v1_2.mp4" },
            { name: "–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π –Ω–∞ –Ω–∞–∫–ª–æ–Ω–Ω–æ–π —Å–∫–∞–º—å–µ", tech: "‚úÖ –£–≥–æ–ª —Å–∫–∞–º—å–∏ 30-45¬∞.\n‚úÖ –ü–æ–¥–Ω–∏–º–∏—Ç–µ –≥–∞–Ω—Ç–µ–ª–∏ –Ω–∞–¥ —Å–æ–±–æ–π. –ù–∞ –≤–¥–æ—Ö–µ –æ–ø—É—Å–∫–∞–π—Ç–µ –∏—Ö –∫ –∫—Ä–∞—è–º –≥—Ä—É–¥–Ω—ã—Ö –º—ã—à—Ü.\n‚úÖ –õ–æ–∫—Ç–∏ —Å–º–æ—Ç—Ä—è—Ç –Ω–µ–º–Ω–æ–≥–æ –≤–ø–µ—Ä–µ–¥ (–ø–æ–¥ —É–≥–ª–æ–º 75¬∞ –∫ –∫–æ—Ä–ø—É—Å—É).\n‚úÖ –û–ø—É—Å–∫–∞–π—Ç–µ –≥–ª—É–±–æ–∫–æ. –ù–∞ –≤—ã–¥–æ—Ö–µ –≤—ã–∂–º–∏—Ç–µ –≤–≤–µ—Ä—Ö, –Ω–µ —Å—Ç—É—á–∏—Ç–µ –≥–∞–Ω—Ç–µ–ª—è–º–∏.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v1_3.mp4" },
            { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Ä—ã—á–∞–∂–Ω–∞—è —Ç—è–≥–∞ Hammer Strength", tech: "‚úÖ –£–ø—Ä–∏—Ç–µ—Å—å –≥—Ä—É–¥—å—é –≤ –ø–æ–¥—É—à–∫—É. –•–≤–∞—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π.\n‚úÖ –¢—è–Ω–∏—Ç–µ —Ä—É–∫–æ—è—Ç–∏ –∫ –ø–æ—è—Å—É. –î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ—Ç–≤–µ–¥–µ–Ω–∏—è –ø–ª–µ—á –Ω–∞–∑–∞–¥, –∑–∞—Ç–µ–º –ª–æ–∫—Ç–∏.\n‚úÖ –í –ø–∏–∫–æ–≤–æ–π —Ç–æ—á–∫–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–≤–µ–¥–∏—Ç–µ –ª–æ–ø–∞—Ç–∫–∏.\n‚ùóÔ∏è –ù–µ —Ä–∞—Å–∫–∞—á–∏–≤–∞–π—Ç–µ—Å—å –∫–æ—Ä–ø—É—Å–æ–º.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v1_4.mp4" },
            { name: "–°–≤–µ–¥–µ–Ω–∏–µ —Ä—É–∫ –≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–µ '–ë–∞–±–æ—á–∫–∞'", tech: "‚úÖ –õ–æ–∫—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–ª–µ—á –∏ —Å–ª–µ–≥–∫–∞ —Å–æ–≥–Ω—É—Ç—ã.\n‚úÖ –ù–∞ –≤—ã–¥–æ—Ö–µ —Å–≤–æ–¥–∏—Ç–µ —Ä—É–∫–æ—è—Ç–∏ –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π. –í –º–æ–º–µ–Ω—Ç —Å–≤–µ–¥–µ–Ω–∏—è –Ω–∞–ø—Ä—è–≥–∏—Ç–µ –≥—Ä—É–¥—å –Ω–∞ 1 —Å–µ–∫.\n‚úÖ –ú–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–∑–≤–æ–¥–∏—Ç–µ —Ä—É–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 12‚Äì15 —Ä–∞–∑", video: "v1_5.mp4" },
            { name: "–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è", tech: "‚úÖ –û–∫—Ä—É–≥–ª—è–π—Ç–µ —Å–ø–∏–Ω—É, —Å–∫—Ä—É—á–∏–≤–∞–π—Ç–µ—Å—å –≤ '—É–ª–∏—Ç–∫—É'.\n‚úÖ –ù–µ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å —Å –ø—Ä—è–º–æ–π —Å–ø–∏–Ω–æ–π.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 15‚Äì20 —Ä–∞–∑", video: "v1_6.mp4" },
            { name: "–ü–ª–∞–Ω–∫–∞", tech: "‚úÖ –£–ø–æ—Ä –Ω–∞ –ª–æ–∫—Ç–∏ –∏ –Ω–æ—Å–∫–∏.\n‚úÖ –¢–µ–ª–æ –ø—Ä—è–º–æ–µ –∫–∞–∫ –¥–æ—Å–∫–∞.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 60 —Å–µ–∫", video: "v1_7.mp4" }
        ]
    },
    {
        day: "–î–µ–Ω—å 2: –ù–æ–≥–∏ + –ö–æ—Ä",
        exercises: [
            { name: "–†–∞–∑–≥–∏–±–∞–Ω–∏–µ –Ω–æ–≥ –≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–µ", tech: "‚úÖ –ö–æ–ª–µ–Ω–Ω—ã–π —Å—É—Å—Ç–∞–≤ —Å—Ç—Ä–æ–≥–æ –Ω–∞–ø—Ä–æ—Ç–∏–≤ –æ—Å–∏ –≤—Ä–∞—â–µ–Ω–∏—è —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞.\n‚úÖ –ù–∞ –≤—ã–¥–æ—Ö–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø—Ä—è–º–∏—Ç–µ –Ω–æ–≥–∏.\n‚úÖ –í –≤–µ—Ä—Ö–Ω–µ–π —Ç–æ—á–∫–µ –∑–∞–¥–µ—Ä–∂–∏—Ç–µ—Å—å –Ω–∞ 1-2 —Å–µ–∫—É–Ω–¥—ã.\n‚úÖ –ú–µ–¥–ª–µ–Ω–Ω–æ –æ–ø—É—Å—Ç–∏—Ç–µ.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 15 —Ä–∞–∑", video: "v2_1.mp4" },
            { name: "–ñ–∏–º –Ω–æ–≥–∞–º–∏ –≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–µ", tech: "‚úÖ –ù–æ–≥–∏ –Ω–∞ —à–∏—Ä–∏–Ω–µ –ø–ª–µ—á. –ù–∞ –≤–¥–æ—Ö–µ –æ–ø—É—Å–∫–∞–π—Ç–µ –≥–ª—É–±–æ–∫–æ.\n‚úÖ –°–ª–µ–¥–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ—è—Å–Ω–∏—Ü–∞ –∏ —Ç–∞–∑ –Ω–µ –æ—Ç—Ä—ã–≤–∞–ª–∏—Å—å –æ—Ç —Å–ø–∏–Ω–∫–∏.\n‚úÖ –ù–∞ –≤—ã–¥–æ—Ö–µ —Ç–æ–ª–∫–∞–π—Ç–µ –ø—è—Ç–∫–∞–º–∏.\n‚ùóÔ∏è –í–∞–∂–Ω–æ: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø—Ä—è–º–ª—è–π—Ç–µ –∫–æ–ª–µ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é!", volume: "4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v2_2.mp4" },
            { name: "–†—É–º—ã–Ω—Å–∫–∞—è —Ç—è–≥–∞ —Å –≥–∞–Ω—Ç–µ–ª—è–º–∏", tech: "‚úÖ –ö–æ–ª–µ–Ω–∏ —á—É—Ç—å —Å–æ–≥–Ω—É—Ç—ã –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã.\n‚úÖ –ù–∞—á–∏–Ω–∞–π—Ç–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Å –æ—Ç–≤–µ–¥–µ–Ω–∏—è —Ç–∞–∑–∞ –Ω–∞–∑–∞–¥. –ì–∞–Ω—Ç–µ–ª–∏ —Å–∫–æ–ª—å–∑—è—Ç –ø–æ –Ω–æ–≥–∞–º.\n‚úÖ –û–ø—É—Å–∫–∞–π—Ç–µ—Å—å –¥–æ —Å–µ—Ä–µ–¥–∏–Ω—ã –≥–æ–ª–µ–Ω–∏.\n‚úÖ –ù–∞ –≤—ã–¥–æ—Ö–µ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å, —Å–∂–∏–º–∞—è —è–≥–æ–¥–∏—Ü—ã.", volume: "4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v2_3.mp4" },
            { name: "–°–≥–∏–±–∞–Ω–∏–µ –Ω–æ–≥ –ª–µ–∂–∞/—Å–∏–¥—è", tech: "‚úÖ –ü—Ä–∏–∂–º–∏—Ç–µ —Ç–∞–∑ –∫ —Å–∫–∞–º—å–µ.\n‚úÖ –ë—ã—Å—Ç—Ä–æ —Å–æ–≥–Ω–∏—Ç–µ –Ω–æ–≥–∏, —Å—Ç–∞—Ä–∞—è—Å—å –∫–æ—Å–Ω—É—Ç—å—Å—è —è–≥–æ–¥–∏—Ü.\n‚úÖ –ú–µ–¥–ª–µ–Ω–Ω–æ (–Ω–∞ 3 —Å—á–µ—Ç–∞) —Ä–∞–∑–æ–≥–Ω–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 12‚Äì15 —Ä–∞–∑", video: "v2_4.mp4" },
            { name: "–ü–æ–¥—ä–µ–º—ã –Ω–∞ –Ω–æ—Å–∫–∏", tech: "‚úÖ –û–ø—É—Å—Ç–∏—Ç–µ –ø—è—Ç–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–Ω–∏–∑, –∑–∞—Ç–µ–º –ø–æ–¥–Ω–∏–º–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ.", volume: "4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 15‚Äì20 —Ä–∞–∑", video: "v2_5.mp4" },
            { name: "–ü–æ–¥—ä–µ–º –Ω–æ–≥ –≤ —É–ø–æ—Ä–µ", tech: "‚úÖ –ü–æ–¥–∫—Ä—É—á–∏–≤–∞–π—Ç–µ —Ç–∞–∑ –≤–≤–µ—Ä—Ö –≤ –≤–µ—Ä—Ö–Ω–µ–π —Ç–æ—á–∫–µ.\n‚úÖ –î–≤–∏–∂–µ–Ω–∏—è –ø–ª–∞–≤–Ω—ã–µ –±–µ–∑ —Ä–∞—Å–∫–∞—á–∫–∏.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 12‚Äì15 —Ä–∞–∑", video: "v2_6.mp4" },
            { name: "–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è", tech: "‚úÖ –û–∫—Ä—É–≥–ª—è–π—Ç–µ —Å–ø–∏–Ω—É, —Å–∫—Ä—É—á–∏–≤–∞–π—Ç–µ—Å—å –≤ '—É–ª–∏—Ç–∫—É'.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 15‚Äì20 —Ä–∞–∑", video: "v2_7.mp4" }
        ]
    },
    {
        day: "–î–µ–Ω—å 3: –ü–ª–µ—á–∏ + –†—É–∫–∏ + –ö–æ—Ä",
        exercises: [
            { name: "–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π —Å–∏–¥—è (–ü–ª–µ—á–∏)", tech: "‚úÖ –ì–∞–Ω—Ç–µ–ª–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —É—à–µ–π, –ª–æ–∫—Ç–∏ —Ä–∞–∑–≤–µ–¥–µ–Ω—ã.\n‚úÖ –í—ã–∂–º–∏—Ç–µ –≥–∞–Ω—Ç–µ–ª–∏ –≤–≤–µ—Ä—Ö –ø–æ –¥—É–≥–µ.\n‚úÖ –ü–ª–∞–≤–Ω–æ –æ–ø—É—Å—Ç–∏—Ç–µ –¥–æ —É—Ä–æ–≤–Ω—è —É—à–µ–π. –ù–µ –Ω–∏–∂–µ.", volume: "4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 8‚Äì12 —Ä–∞–∑", video: "v3_1.mp4" },
            { name: "–†–∞–∑–≤–µ–¥–µ–Ω–∏–µ –≥–∞–Ω—Ç–µ–ª–µ–π –≤ —Å—Ç–æ—Ä–æ–Ω—ã (–ú–∞—Ö–∏)", tech: "‚úÖ –ß—É—Ç—å –Ω–∞–∫–ª–æ–Ω–∏—Ç–µ—Å—å –≤–ø–µ—Ä–µ–¥. –õ–æ–∫—Ç–∏ —á—É—Ç—å —Å–æ–≥–Ω—É—Ç—ã.\n‚úÖ –ü–æ–¥–Ω–∏–º–∞–π—Ç–µ —Ä—É–∫–∏ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω—ã. –õ–æ–∫–æ—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—à–µ –∫–∏—Å—Ç–∏.\n‚úÖ –ü–æ–¥–Ω–∏–º–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏ —Å –ø–æ–ª–æ–º.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 12‚Äì15 —Ä–∞–∑", video: "v3_2.mp4" },
            { name: "–û–±—Ä–∞—Ç–Ω—ã–µ —Ä–∞–∑–≤–µ–¥–µ–Ω–∏—è (–ó–∞–¥–Ω—è—è –¥–µ–ª—å—Ç–∞)", tech: "‚úÖ –°—è–¥—å—Ç–µ –ª–∏—Ü–æ–º –∫ —Å–ø–∏–Ω–∫–µ.\n‚úÖ –û—Ç–≤–æ–¥–∏—Ç–µ –ø—Ä—è–º—ã–µ —Ä—É–∫–∏ –Ω–∞–∑–∞–¥ —Ç–∞–∫ –¥–∞–ª–µ–∫–æ, –∫–∞–∫ –º–æ–∂–µ—Ç–µ.\n‚úÖ –ß—É–≤—Å—Ç–≤—É–π—Ç–µ –∑–∞–¥ –ø–ª–µ—á–∞, –∞ –Ω–µ —Å–ø–∏–Ω—É.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 12‚Äì15 —Ä–∞–∑", video: "v3_3.mp4" },
            { name: "–†–∞–∑–≥–∏–±–∞–Ω–∏–µ –Ω–∞ –±–ª–æ–∫–µ (–¢—Ä–∏—Ü–µ–ø—Å)", tech: "‚úÖ –ü—Ä–∏–∂–º–∏—Ç–µ –ª–æ–∫—Ç–∏ –∫ —Ä–µ–±—Ä–∞–º.\n‚úÖ –†–∞–∑–≥–∏–±–∞–π—Ç–µ –≤–Ω–∏–∑. –í –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–µ —Ä–∞–∑–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ü—ã –∫–∞–Ω–∞—Ç–∞.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 12‚Äì15 —Ä–∞–∑", video: "v3_4.mp4" },
            { name: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –∂–∏–º –ª–µ–∂–∞", tech: "‚úÖ –°–≥–∏–±–∞–π—Ç–µ —Ä—É–∫–∏, –∑–∞–≤–æ–¥—è –≥—Ä–∏—Ñ –≥–ª—É–±–æ–∫–æ –∑–∞ –≥–æ–ª–æ–≤—É.\n‚úÖ –õ–æ–∫—Ç–∏ —Å–º–æ—Ç—Ä—è—Ç –≤ –ø–æ—Ç–æ–ª–æ–∫, –∞ –Ω–µ –≤ —Å—Ç–æ—Ä–æ–Ω—ã.\n‚úÖ –í—ã–∂–º–∏—Ç–µ –≤–≤–µ—Ä—Ö.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v3_5.mp4" },
            { name: "–°–≥–∏–±–∞–Ω–∏–µ —Ä—É–∫ —Å —Å—É–ø–∏–Ω–∞—Ü–∏–µ–π (–ë–∏—Ü–µ–ø—Å)", tech: "‚úÖ –ù–∞—á–∏–Ω–∞–π—Ç–µ –ø–æ–¥—ä–µ–º, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—è –∫–∏—Å—Ç—å –Ω–∞—Ä—É–∂—É.\n‚úÖ –í –≤–µ—Ä—Ö–Ω–µ–π —Ç–æ—á–∫–µ –º–∏–∑–∏–Ω–µ—Ü –≤—ã—à–µ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v3_6.mp4" },
            { name: "–ú–æ–ª–æ—Ç–∫–∏", tech: "‚úÖ –õ–∞–¥–æ–Ω–∏ —Å–º–æ—Ç—Ä—è—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –≤—Å–µ –≤—Ä–µ–º—è.\n‚úÖ –ë–µ–∑ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –∫–∏—Å—Ç–∏.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 10‚Äì12 —Ä–∞–∑", video: "v3_7.mp4" },
            { name: "–†—É—Å—Å–∫–∏–π —Ç–≤–∏—Å—Ç", tech: "‚úÖ –°–∏–¥—è, –Ω–æ–≥–∏ –Ω–∞ –≤–µ—Å—É.\n‚úÖ –ü–æ–≤–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –∫–æ—Ä–ø—É—Å —Å –≤–µ—Å–æ–º –∏–∑ —Å—Ç–æ—Ä–æ–Ω—ã –≤ —Å—Ç–æ—Ä–æ–Ω—É.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 20 —Ä–∞–∑", video: "v3_8.mp4" },
            { name: "–ú–æ–ª–∏—Ç–≤–∞ –Ω–∞ –±–ª–æ–∫–µ", tech: "‚úÖ –ù–∞ –∫–æ–ª–µ–Ω—è—Ö, –∫–∞–Ω–∞—Ç —É —à–µ–∏.\n‚úÖ –°–∫—Ä—É—á–∏–≤–∞–π—Ç–µ—Å—å –≤–Ω–∏–∑ —Å–∏–ª–æ–π –ø—Ä–µ—Å—Å–∞.", volume: "3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 15‚Äì20 —Ä–∞–∑", video: "v3_9.mp4" }
        ]
    }
];

let curDay = null, curExIdx = 0, logs = JSON.parse(localStorage.getItem('gym_v3_logs')) || [], chartObj = null;

function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
    document.getElementById('screen-' + id).classList.remove('hidden');
    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    if(id === 'home') document.querySelectorAll('.nav-item')[0].classList.add('active');
    if(id === 'stats') { document.querySelectorAll('.nav-item')[1].classList.add('active'); renderStats(); }
}

function startWorkout(dayIdx) {
    curDay = program[dayIdx];
    curExIdx = 0;
    showScreen('exercise');
    renderExercise();
}

function renderExercise() {
    const ex = curDay.exercises[curExIdx];
    const isLast = curExIdx === curDay.exercises.length - 1;
    
    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—è –¥–ª—è 4 –ø–æ–¥—Ö–æ–¥–æ–≤ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ)
    let setsHtml = '';
    for(let i=1; i<=4; i++) {
        setsHtml += `
            <div class="set-row">
                <div class="input-box"><label>–í–µ—Å (–∫–≥)</label><input type="number" step="0.5" id="w-${i}" placeholder="0"></div>
                <div class="input-box"><label>–ü–æ–≤—Ç–æ—Ä—ã</label><input type="number" id="r-${i}" placeholder="0"></div>
            </div>
        `;
    }

    document.getElementById('ex-content').innerHTML = `
        <p style="color:var(--gray); margin-bottom:5px;">${curDay.day} ‚Ä¢ ${curExIdx + 1}/${curDay.exercises.length}</p>
        <h1>${ex.name}</h1>
        <div class="video-container">
            <video playsinline loop controls src="videos/${ex.video}"></video>
        </div>
        <div class="card">
            <h3>–û–±—ä–µ–º: ${ex.volume}</h3>
            <div class="tech-text">${ex.tech}</div>
        </div>
        <div class="card">
            <h3>–ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</h3>
            ${setsHtml}
            <button onclick="saveEx()">${isLast ? '–ó–ê–í–ï–†–®–ò–¢–¨ –¢–†–ï–ù–ò–†–û–í–ö–£' : '–°–õ–ï–î–£–Æ–©–ï–ï –£–ü–†–ê–ñ–ù–ï–ù–ò–ï'}</button>
            <button class="btn-secondary" onclick="showScreen('home')">–í–´–ô–¢–ò</button>
        </div>
    `;
    window.scrollTo(0,0);
}

function saveEx() {
    const ex = curDay.exercises[curExIdx];
    const setResults = [];
    for(let i=1; i<=4; i++) {
        const w = document.getElementById(`w-${i}`).value;
        const r = document.getElementById(`r-${i}`).value;
        if(w && r) setResults.push({w: parseFloat(w), r: parseInt(r)});
    }

    if(setResults.length > 0) {
        logs.push({
            timestamp: Date.now(),
            date: new Date().toLocaleDateString('ru-RU'),
            name: ex.name,
            sets: setResults
        });
        localStorage.setItem('gym_v3_logs', JSON.stringify(logs));
    }

    if(curExIdx < curDay.exercises.length - 1) {
        curExIdx++;
        renderExercise();
    } else {
        alert("–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.");
        showScreen('home');
    }
}

function renderStats() {
    const names = [...new Set(logs.map(l => l.name))];
    const sel = document.getElementById('chart-select');
    sel.innerHTML = names.map(n => `<option value="${n}">${n}</option>`).join('');
    
    document.getElementById('history-list').innerHTML = logs.slice().reverse().slice(0,15).map(l => `
        <div class="card" style="padding:12px; margin-bottom:10px;">
            <div style="display:flex; justify-content:space-between; font-size:13px; color:var(--gray);">
                <span>${l.date}</span>
                <strong>${l.name}</strong>
            </div>
            <div style="margin-top:5px; font-weight:600;">
                ${l.sets.map(s => `${s.w}–∫–≥ x ${s.r}`).join(' | ')}
            </div>
        </div>
    `).join('');
    
    if(names.length > 0) initChart();
}

function initChart() {
    const name = document.getElementById('chart-select').value;
    const filtered = logs.filter(l => l.name === name).sort((a,b) => a.timestamp - b.timestamp);
    
    const labels = filtered.map(f => f.date);
    const dataPoints = filtered.map(f => {
        // –ë–µ—Ä–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –∑–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
        return Math.max(...f.sets.map(s => s.w));
    });

    const ctx = document.getElementById('mainChart').getContext('2d');
    if(chartObj) chartObj.destroy();
    
    chartObj = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: '–ú–∞–∫—Å. –≤–µ—Å (–∫–≥)',
                data: dataPoints,
                borderColor: '#007aff',
                backgroundColor: 'rgba(0,122,255,0.1)',
                fill: true,
                tension: 0.3
            }]
        },
        options: { responsive: true, maintainAspectRatio: false }
    });
}

if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
}
</script>
</body>
</html>